<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pixel Master + Mini Oyun</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
:root {
  --neon-pink: #ff00ff;
  --neon-blue: #00ffff;
}
*{box-sizing:border-box;margin:0;padding:0;}
body, html{
  width:100%;
  height:100%;
  font-family:'Press Start 2P', cursive;
  background:radial-gradient(circle at 50% 50%,#1a1a2e 0%,#000 100%);
  color:white;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
}
.hidden{display:none;}
button{
  padding:10px 18px;
  cursor:pointer;
  font-family:'Press Start 2P';
  border:2px solid var(--neon-pink);
  color:var(--neon-pink);
  background:transparent;
  border-radius:8px;
  transition:.3s;
}
button:hover{
  background:var(--neon-pink);
  color:black;
  box-shadow:0 0 15px var(--neon-pink);
}
#character-canvas{
  width:90vw;
  max-width:350px;
  height:40vh;
  background:linear-gradient(145deg,#111,#222);
  border:2px solid var(--neon-blue);
  border-radius:15px;
  display:flex;
  justify-content:center;
  align-items:center;
  margin:10px 0;
  overflow:hidden;
}
.controls{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  justify-content:center;
  margin-bottom:10px;
}
#dolap-list{
  display:flex;
  flex-wrap:wrap;
  gap:15px;
  justify-content:center;
  padding:10px;
  max-width:90vw;
  overflow-y:auto;
  max-height:50vh;
}
.character-card{
  background:rgba(0,0,0,0.7);
  padding:10px;
  border:2px solid var(--neon-blue);
  border-radius:10px;
  text-align:center;
  width:120px;
  display:flex;
  flex-direction:column;
  align-items:center;
}
.character-card svg{width:80px;height:100px;}
#game-canvas{
  border:2px solid var(--neon-pink);
  border-radius:10px;
  margin-top:10px;
  background:#111;
}
</style>
</head>
<body>

<div id="login">
  <p>Takma adını gir</p>
  <input id="nickname" placeholder="Takma ad">
  <button onclick="enterSite()">GİR</button>
</div>

<div id="menu" class="hidden">
<h2>Merhaba <span id="display-nick"></span>!</h2>
<div class="controls">
<button onclick="openLibrary()">Dolap</button>
<button onclick="openCreator()">Oluştur</button>
<button onclick="openGame()">Oyun Modu</button>
</div>
</div>

<div id="creator" class="hidden">
<h2>Karakter Oluştur</h2>
<div id="character-canvas"></div>
<div class="controls">
<button onclick="change('hair')">Saç</button>
<button onclick="change('top')">Üst</button>
<button onclick="change('bottom')">Alt</button>
<button onclick="change('shoes')">Ayakkabı</button>
<button onclick="saveCurrentCharacter()">Kaydet</button>
<button onclick="backToMenu()">Geri</button>
</div>
</div>

<div id="library" class="hidden">
<h2>Dolap</h2>
<div id="dolap-list"></div>
<button onclick="backToMenu()">Geri</button>
</div>

<div id="game" class="hidden">
<h2>Duvara Top Sektirme</h2>
<canvas id="game-canvas" width="300" height="400"></canvas>
<button onclick="backToMenu()">Geri</button>
</div>

<script>
const bodyBase=`
<rect x="35" y="30" width="30" height="30" fill="#ffdbac"/>
<rect x="40" y="60" width="20" height="40" fill="#ffdbac"/>
<rect x="40" y="100" width="9" height="40" fill="#ffdbac"/>
<rect x="51" y="100" width="9" height="40" fill="#ffdbac"/>
`;

const assets={
hair:[
`<rect x="35" y="25" width="30" height="10" fill="#4d2600"/>`,
`<rect x="32" y="20" width="36" height="20" fill="#ffd700"/>`,
`<rect x="30" y="18" width="40" height="22" fill="#00ffff"/>`
],
top:[
`<rect x="40" y="60" width="20" height="35" fill="#ff0055"/>`,
`<rect x="40" y="60" width="20" height="35" fill="#222"/>`,
`<rect x="40" y="60" width="20" height="35" fill="#00ff00"/>`
],
bottom:[
`<rect x="40" y="95" width="9" height="45" fill="#2b2b80"/><rect x="51" y="95" width="9" height="45" fill="#2b2b80"/>`,
`<rect x="40" y="95" width="20" height="15" fill="#555"/>`,
`<rect x="40" y="95" width="9" height="45" fill="#ff00ff"/><rect x="51" y="95" width="9" height="45" fill="#ff00ff"/>`
],
shoes:[
`<rect x="38" y="140" width="14" height="6" fill="#000"/><rect x="52" y="140" width="14" height="6" fill="#000"/>`
]
};

let currentIndices={hair:0,top:0,bottom:0,shoes:0};

function hideAll(){
  document.getElementById('login').classList.add('hidden');
  document.getElementById('menu').classList.add('hidden');
  document.getElementById('creator').classList.add('hidden');
  document.getElementById('library').classList.add('hidden');
  document.getElementById('game').classList.add('hidden');
}

function enterSite(){
  const nick=document.getElementById('nickname').value.trim();
  if(!nick) return alert('Takma ad boş olamaz!');
  localStorage.setItem('nickname',nick);
  document.getElementById('display-nick').textContent=nick;
  hideAll();
  document.getElementById('menu').classList.remove('hidden');
}

function openCreator(){
  hideAll();
  document.getElementById('creator').classList.remove('hidden');
  renderCharacter();
}
function openLibrary(){
  hideAll();
  document.getElementById('library').classList.remove('hidden');
  loadLibrary();
}
function openGame(){
  hideAll();
  document.getElementById('game').classList.remove('hidden');
  startGame();
}
function backToMenu(){
  hideAll();
  document.getElementById('menu').classList.remove('hidden');
}

function renderCharacter(){
  document.getElementById('character-canvas').innerHTML=`
  <svg viewBox="0 0 100 160" width="100%" height="100%">
    ${bodyBase}
    ${assets.hair[currentIndices.hair]}
    ${assets.top[currentIndices.top]}
    ${assets.bottom[currentIndices.bottom]}
    ${assets.shoes[currentIndices.shoes]}
  </svg>`;
}

function change(cat){
  currentIndices[cat]=(currentIndices[cat]+1)%assets[cat].length;
  renderCharacter();
}

function saveCurrentCharacter(){
  alert('Karakter kaydedildi!');
}

window.onload=()=>renderCharacter();
</script>

</body>
</html>
