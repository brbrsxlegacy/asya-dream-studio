<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pixel Master</title>

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
:root{
  --neon-pink:#ff00ff;
  --neon-blue:#00ffff;
}

*{
  box-sizing:border-box;
  margin:0;
  padding:0;
}

html,body{
  width:100%;
  min-height:100vh;
  font-family:'Press Start 2P', cursive;
  background:radial-gradient(circle at 50% 50%,#1a1a2e 0%,#000 100%);
  color:white;

  display:flex;
  justify-content:center;
  align-items:flex-start;
  padding-top:40px;
}

.hidden{display:none;}

button{
  padding:10px 16px;
  font-family:'Press Start 2P';
  cursor:pointer;
  background:transparent;
  border:2px solid var(--neon-pink);
  color:var(--neon-pink);
  border-radius:8px;
}
button:hover{
  background:var(--neon-pink);
  color:black;
}

input{
  padding:8px;
  font-family:'Press Start 2P';
  margin-top:10px;
}

.controls{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  justify-content:center;
  margin-top:15px;
}

#login,#menu,#creator,#library{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:15px;
}

/* ❗ SABİT BOYUT – EKRANI KAPLAMAZ */
#character-canvas{
  width:320px;
  height:480px;
  background:linear-gradient(145deg,#111,#222);
  border:2px solid var(--neon-blue);
  border-radius:15px;

  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
}

#dolap-list{
  display:flex;
  gap:15px;
  flex-wrap:wrap;
  justify-content:center;
}

.character-card{
  width:120px;
  padding:10px;
  border:2px solid var(--neon-blue);
  border-radius:10px;
  background:rgba(0,0,0,.6);
  text-align:center;
}
.character-card svg{
  width:80px;
  height:100px;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login">
  <p>Takma adını gir</p>
  <input id="nickname" placeholder="Takma ad">
  <button onclick="enterSite()">GİR</button>
</div>

<!-- MENU -->
<div id="menu" class="hidden">
  <h3>Merhaba <span id="display-nick"></span></h3>
  <div class="controls">
    <button onclick="openCreator()">Oluştur</button>
    <button onclick="openLibrary()">Dolap</button>
  </div>
</div>

<!-- CREATOR -->
<div id="creator" class="hidden">
  <h3>Karakter Oluştur</h3>
  <div id="character-canvas"></div>
  <div class="controls">
    <button onclick="change('hair')">Saç</button>
    <button onclick="change('top')">Üst</button>
    <button onclick="change('bottom')">Alt</button>
    <button onclick="change('shoes')">Ayakkabı</button>
    <button onclick="saveCurrentCharacter()">Kaydet</button>
    <button onclick="backToMenu()">Geri</button>
  </div>
</div>

<!-- LIBRARY -->
<div id="library" class="hidden">
  <h3>Dolap</h3>
  <div id="dolap-list"></div>
  <button onclick="backToMenu()">Geri</button>
</div>

<script>
// --- KARAKTER ---
const bodyBase=`
<rect x="35" y="30" width="30" height="30" fill="#ffdbac"/>
<rect x="40" y="60" width="20" height="40" fill="#ffdbac"/>
<rect x="40" y="100" width="9" height="40" fill="#ffdbac"/>
<rect x="51" y="100" width="9" height="40" fill="#ffdbac"/>
`;

const assets={
hair:[
`<rect x="35" y="25" width="30" height="10" fill="#4d2600"/>`,
`<rect x="32" y="20" width="36" height="20" fill="#ffd700"/>`,
`<rect x="30" y="18" width="40" height="22" fill="#00ffff"/>`
],
top:[
`<rect x="40" y="60" width="20" height="35" fill="#ff0055"/>`,
`<rect x="40" y="60" width="20" height="35" fill="#222"/>`,
`<rect x="40" y="60" width="20" height="35" fill="#00ff00"/>`
],
bottom:[
`<rect x="40" y="95" width="9" height="45" fill="#2b2b80"/><rect x="51" y="95" width="9" height="45" fill="#2b2b80"/>`,
`<rect x="40" y="95" width="20" height="15" fill="#555"/>`,
`<rect x="40" y="95" width="9" height="45" fill="#ff00ff"/><rect x="51" y="95" width="9" height="45" fill="#ff00ff"/>`
],
shoes:[
`<rect x="38" y="140" width="14" height="6" fill="#000"/><rect x="52" y="140" width="14" height="6" fill="#000"/>`,
`<rect x="38" y="140" width="14" height="6" fill="red"/><rect x="52" y="140" width="14" height="6" fill="red"/>`
]
};

let currentIndices={hair:0,top:0,bottom:0,shoes:0};

// --- SAYFA ---
const login=document.getElementById("login");
const menu=document.getElementById("menu");
const creator=document.getElementById("creator");
const library=document.getElementById("library");

function hideAll(){
  login.classList.add("hidden");
  menu.classList.add("hidden");
  creator.classList.add("hidden");
  library.classList.add("hidden");
}

function enterSite(){
  const nick=nickname.value.trim();
  if(!nick) return alert("Takma ad boş olamaz");
  localStorage.setItem("nickname",nick);
  document.getElementById("display-nick").textContent=nick;
  hideAll();
  menu.classList.remove("hidden");
}

function openCreator(){
  hideAll();
  creator.classList.remove("hidden");
  renderCharacter();
}
function openLibrary(){
  hideAll();
  library.classList.remove("hidden");
  loadLibrary();
}
function backToMenu(){
  hideAll();
  menu.classList.remove("hidden");
}

function renderCharacter(){
  document.getElementById("character-canvas").innerHTML=`
  <svg viewBox="0 0 100 160" width="100%" height="100%">
    ${bodyBase}
    ${assets.hair[currentIndices.hair]}
    ${assets.top[currentIndices.top]}
    ${assets.bottom[currentIndices.bottom]}
    ${assets.shoes[currentIndices.shoes]}
  </svg>`;
}

function change(cat){
  currentIndices[cat]=(currentIndices[cat]+1)%assets[cat].length;
  renderCharacter();
}

function saveCurrentCharacter(){
  const nick=localStorage.getItem("nickname");
  const svg=document.getElementById("character-canvas").innerHTML;
  const saved=JSON.parse(localStorage.getItem("savedCharacters")||"[]");
  saved.push({nick,svg});
  localStorage.setItem("savedCharacters",JSON.stringify(saved));
  alert("Kaydedildi!");
}

function loadLibrary(){
  const list=document.getElementById("dolap-list");
  list.innerHTML="";
  const nick=localStorage.getItem("nickname");
  const saved=JSON.parse(localStorage.getItem("savedCharacters")||"[]");
  saved.filter(c=>c.nick===nick).forEach(c=>{
    const d=document.createElement("div");
    d.className="character-card";
    d.innerHTML=c.svg;
    list.appendChild(d);
  });
}

window.onload=()=>login.classList.remove("hidden");
</script>

</body>
</html>

